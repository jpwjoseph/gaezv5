% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download.R
\name{download_gaez_dataset}
\alias{download_gaez_dataset}
\title{Download GAEZ v5 Dataset}
\usage{
download_gaez_dataset(
  variable = "RES05-YX",
  time_period = "FP4160",
  start_year = NULL,
  end_year = NULL,
  climate_model = NULL,
  ssp = "SSP370",
  crop = "WHEA",
  water_management_level = "HRLM",
  water_supply = "WSR",
  resolution = NA,
  download_dir = NULL,
  overwrite = FALSE,
  validate_inputs = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{variable}{Character - Variable code (e.g., "RES05-YX", "RES02-YLD").
Default is "RES05-YX" (attainable yield).}

\item{time_period}{Character - Time period code (default: "FP4160"). See
\code{?build_gaez_url} for valid options.}

\item{start_year}{Numeric - Start year for time period lookup (optional)}

\item{end_year}{Numeric - End year for time period lookup (optional)}

\item{climate_model}{Character - Climate model (auto-selected if NULL)}

\item{ssp}{Character - SSP scenario (default: "SSP370")}

\item{crop}{Character - Crop name or code (default: "WHEA" for wheat)}

\item{water_management_level}{Character - Water management level (default: "HRLM")}

\item{water_supply}{Character - Water supply code (default: "WSR")}

\item{resolution}{Character - Resolution ("1km", "10km", or NA)}

\item{download_dir}{Character - Custom download directory. If NULL, uses
"Data/GAEZ/" or creates it if it doesn't exist.}

\item{overwrite}{Logical - Whether to overwrite existing files (default: FALSE).
If FALSE and file exists, returns immediately without downloading.}

\item{validate_inputs}{Logical - Whether to validate inputs before download
(default: TRUE). Reserved for future use.}

\item{verbose}{Logical - Whether to show detailed progress messages (default: TRUE)}
}
\value{
A list with the following elements:
\itemize{
\item \code{success}: Logical indicating if download succeeded
\item \code{file_path}: Full path to the downloaded file
\item \code{url}: The download URL used
\item \code{message}: Status message
\item \code{validation_errors}: Character vector of any validation errors
\item \code{file_size}: File size in bytes
\item \code{download_time}: Time taken for download in seconds
\item \code{already_exists}: Logical indicating if file already existed
}
}
\description{
Downloads a GAEZ v5 dataset from Google Cloud Storage with comprehensive
validation, duplicate detection, and progress reporting. Supports automatic
resumption if files already exist and intelligent path resolution across
multiple common locations.
}
\details{
The function performs the following steps:
\enumerate{
\item Builds the download URL using \code{build_gaez_url()}
\item Determines the download directory and checks for existing files
in multiple common locations
\item Performs a HEAD request to validate the URL exists
\item Downloads the file with progress reporting
\item Validates the downloaded file (checks file size, extension)
}

The function automatically searches for existing downloads in:
\itemize{
\item The specified download_dir
\item Data/GAEZ/
\item GAEZ/ (in working directory)
\item Data/GAEZ_Niger_Analysis/ (legacy location)
}
}
\examples{
\dontrun{
# Basic download - wheat yield, future period
result <- download_gaez_dataset()

# Download specific crop for historical period
result <- download_gaez_dataset(
  crop = "maize",
  time_period = "HP0120",
  climate_model = "AGERA5"
)

# Download with year specification
result <- download_gaez_dataset(
  crop = "sorghum",
  start_year = 2041,
  end_year = 2060,
  ssp = "SSP370"
)

# Check result
if (result$success) {
  print(paste("Downloaded:", result$file_path))
  print(paste("Size:", round(result$file_size / 1024^2, 2), "MB"))
}
}

}
\seealso{
\code{\link{build_gaez_url}}, \code{\link{batch_download_gaez_datasets}}
}
